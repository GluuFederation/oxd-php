<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>oxd-php: oxd-php-library</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">oxd-php
   &#160;<span id="projectnumber">3.1.2</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">oxd-php-library </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>oxd-php-library is a client library for the <a class="el" href="namespace_gluu.html">Gluu</a> oxd Server. For information about oxd, visit <a href="http://oxd.gluu.org">http://oxd.gluu.org</a></p>
<h2>Pre Requisite</h2>
<h4>Required</h4>
<ul>
<li><a href="https://www.gluu.org/">GLUU Server</a></li>
<li><a href="https://gluu.org/docs/oxd">OXD Server</a></li>
</ul>
<h4>Optional</h4>
<p>OXD-TO-HTTP Server is required if you want to access OXD server over HTTP.</p><ul>
<li><a href="https://github.com/GluuFederation/oxd-to-http">OXD-TO-HTTP Server</a></li>
</ul>
<p>###### Attention </p><div class="fragment"><div class="line">Applications will not be working if your hosts does not have https://.</div></div><!-- fragment --><h2>Installation</h2>
<h3>Source</h3>
<p>oxd-php-library source is available on Github:</p>
<ul>
<li><a href="https://github.com/GluuFederation/oxd-php-library">Github sources</a></li>
</ul>
<h3>Composer: oxd-php-api</h3>
<ul>
<li><a href="https://github.com/GluuFederation/oxd-php-api">Compose API source</a></li>
<li><a href="https://github.com/GluuFederation/oxd-php-api/releases/tag/v3.0.1">Library version 3.0.1</a></li>
</ul>
<p>This is the preferred method. See the <a href="https://getcomposer.org">composer</a> website for https://getcomposer.org/doc/00-intro.md "installation instructions" if you do not already have it installed.</p>
<p>To install oxd-php-api via Composer, execute the following command in your project root:</p>
<p>``<code> $ composer install</code>composer require "gluufederation/oxd-php-api": "3.0.1"`</p>
<div class="fragment"><div class="line">**Note**: OpenID Connect requires *https.* This library will not </div><div class="line">work if your website uses *http* only.</div><div class="line"></div><div class="line">## Configuration </div><div class="line"></div><div class="line">The oxd-php-library configuration file is located in </div><div class="line">&#39;oxd-rp-settings.json&#39;. The values here are used during </div><div class="line">registration. For a full list of supported</div><div class="line">oxd configuration parameters, see the </div><div class="line">[oxd documentation](https://gluu.org/docs/oxd/protocol/)</div><div class="line">Below is a typical configuration data set for registration:</div><div class="line"></div><div class="line">``` {.code }</div><div class="line">{</div><div class="line">   &quot;op_host&quot;:&quot;&lt;GLUU Server url&gt;&quot;,</div><div class="line">   &quot;oxd_host&quot;:&quot;&lt;OXD server host IP&gt;&quot;,</div><div class="line">   &quot;oxd_host_port&quot;:8099,</div><div class="line">   &quot;authorization_redirect_uri&quot;:&quot;[https://client.example.com/welcome]&quot;,</div><div class="line">   &quot;post_logout_redirect_uri&quot;:&quot;[https://client.example.com/welcome]&quot;,</div><div class="line">   &quot;scope&quot;:[</div><div class="line">      &quot;openid&quot;,</div><div class="line">      &quot;profile&quot;,</div><div class="line">      &quot;uma_protection&quot;,</div><div class="line">      &quot;uma_authorization&quot;</div><div class="line">   ],</div><div class="line">   &quot;application_type&quot;:&quot;web&quot;,</div><div class="line">   &quot;response_types&quot;:[</div><div class="line">      &quot;code&quot;</div><div class="line">   ],</div><div class="line">   &quot;grant_types&quot;:[</div><div class="line">      &quot;authorization_code&quot;</div><div class="line">   ],</div><div class="line">   &quot;acr_values&quot;:[</div><div class="line">      &quot;&quot;</div><div class="line">   ]</div><div class="line">}</div></div><!-- fragment --><ul>
<li>oxd_host_port - oxd port or socket</li>
</ul>
<h2>OXD-To-HTTP Configuration</h2>
<p>The oxd-php-library configuration file is located in 'oxdHttpConfig.php'. The values here are used during the usage of all GLUU protocols.For a full list of supported protocols, see the <a href="https://gluu.org/docs/oxd/protocol/">oxd protocol</a> documentation.</p>
<div class="fragment"><div class="line">return [</div><div class="line">    &#39;host&#39; =&gt; &#39;&lt;OXD-TO-HTTP Host&gt;&#39;,</div><div class="line">    &#39;get_authorization_url&#39; =&gt; &quot;get-authorization-url&quot;,</div><div class="line">    &#39;update_site_registration&#39; =&gt; &quot;update-site&quot;,</div><div class="line">    &#39;get_tokens_by_code&#39; =&gt; &quot;get-tokens-by-code&quot;,</div><div class="line">    &#39;get_user_info&#39; =&gt; &quot;get-user-info&quot;,</div><div class="line">    &#39;register_site&#39; =&gt; &quot;register-site&quot;,</div><div class="line">    &#39;get_logout_uri&#39; =&gt; &quot;logout&quot;</div><div class="line">];</div></div><!-- fragment --><h2>Sample code</h2>
<h3>Register.php (OXD-TO-HTTP)</h3>
<ul>
<li><a href="https://gluu.org/docs/oxd/protocol/#register-site">Register_site protocol description</a>.</li>
</ul>
<p><b>Example</b></p>
<div class="fragment"><div class="line"> require_once &#39;./utils.php&#39;;</div><div class="line"> require_once &#39;./oxdlibrary/Register_site.php&#39;;</div><div class="line"> $config = include(&#39;./oxdlibrary/oxdHttpConfig.php&#39;);</div><div class="line"></div><div class="line"> if(!checkOxdId())</div><div class="line"> {</div><div class="line">     setRedirectUrl($_REQUEST[&#39;redirectUrl&#39;]);</div><div class="line">     try{</div><div class="line">         $register_site = new Register_site();</div><div class="line">         $register_site-&gt;setRequestOpHost(Oxd_RP_config::$op_host);</div><div class="line">         $register_site-&gt;setRequestAcrValues(Oxd_RP_config::$acr_values);</div><div class="line">         $register_site-&gt;setRequestAuthorizationRedirectUri(Oxd_RP_config::$authorization_redirect_uri);</div><div class="line">         $register_site-&gt;setRequestPostLogoutRedirectUri(Oxd_RP_config::$post_logout_redirect_uri);</div><div class="line">         $register_site-&gt;setRequestGrantTypes(Oxd_RP_config::$grant_types);</div><div class="line">         $register_site-&gt;setRequestResponseTypes(Oxd_RP_config::$response_types);</div><div class="line">         $register_site-&gt;setRequestScope(Oxd_RP_config::$scope);</div><div class="line">         $register_site-&gt;request($config[&quot;host&quot;].$config[$register_site-&gt;getCommand()]);</div><div class="line">         setOxdId($register_site-&gt;getResponseOxdId());</div><div class="line">         $data[&quot;status&quot;] = &quot;ok&quot;;</div><div class="line">         echo json_encode($data);</div><div class="line">     }</div><div class="line">     catch(Exception $e){</div><div class="line">         echo &quot;{\&quot;error\&quot;:\&quot;&quot;.$e-&gt;getMessage().&quot;\&quot;}&quot;;</div><div class="line">     }</div><div class="line"> }</div><div class="line"> else {</div><div class="line">     $data[&quot;status&quot;] = &quot;done&quot;;</div><div class="line">     $rdpSettings = getOxdRpSettings();</div><div class="line">     $data[&quot;redirectUrl&quot;] = $rdpSettings-&gt;authorization_redirect_uri;</div><div class="line">     echo json_encode($data);</div><div class="line">}</div></div><!-- fragment --><h3>Register.php (SOCKET)</h3>
<ul>
<li><a href="https://gluu.org/docs/oxd/protocol/#register-site">Register_site protocol description</a>.</li>
</ul>
<p><b>Example</b></p>
<div class="fragment"><div class="line"> require_once &#39;./utils.php&#39;;</div><div class="line"> require_once &#39;./oxdlibrary/Register_site.php&#39;;</div><div class="line"> $config = include(&#39;./oxdlibrary/oxdHttpConfig.php&#39;);</div><div class="line"></div><div class="line"> if(!checkOxdId())</div><div class="line"> {</div><div class="line">     setRedirectUrl($_REQUEST[&#39;redirectUrl&#39;]);</div><div class="line">     try{</div><div class="line">         $register_site = new Register_site();</div><div class="line">         $register_site-&gt;setRequestOpHost(Oxd_RP_config::$op_host);</div><div class="line">         $register_site-&gt;setRequestAcrValues(Oxd_RP_config::$acr_values);</div><div class="line">         $register_site-&gt;setRequestAuthorizationRedirectUri(Oxd_RP_config::$authorization_redirect_uri);</div><div class="line">         $register_site-&gt;setRequestPostLogoutRedirectUri(Oxd_RP_config::$post_logout_redirect_uri);</div><div class="line">         $register_site-&gt;setRequestGrantTypes(Oxd_RP_config::$grant_types);</div><div class="line">         $register_site-&gt;setRequestResponseTypes(Oxd_RP_config::$response_types);</div><div class="line">         $register_site-&gt;setRequestScope(Oxd_RP_config::$scope);</div><div class="line">         $register_site-&gt;request();</div><div class="line">         setOxdId($register_site-&gt;getResponseOxdId());</div><div class="line">         $data[&quot;status&quot;] = &quot;ok&quot;;</div><div class="line">         echo json_encode($data);</div><div class="line">     }</div><div class="line">     catch(Exception $e){</div><div class="line">         echo &quot;{\&quot;error\&quot;:\&quot;&quot;.$e-&gt;getMessage().&quot;\&quot;}&quot;;</div><div class="line">     }</div><div class="line"> }</div><div class="line"> else {</div><div class="line">     $data[&quot;status&quot;] = &quot;done&quot;;</div><div class="line">     $rdpSettings = getOxdRpSettings();</div><div class="line">     $data[&quot;redirectUrl&quot;] = $rdpSettings-&gt;authorization_redirect_uri;</div><div class="line">     echo json_encode($data);</div><div class="line">}</div></div><!-- fragment --><h3>Update.php (OXD-TO-HTTP)</h3>
<ul>
<li><a href="https://gluu.org/docs/oxd/protocol/#update-site-registration">Update_site_registration protocol description</a>.</li>
</ul>
<p><b>Example</b></p>
<div class="fragment"><div class="line">require_once &#39;./utils.php&#39;;</div><div class="line">require_once &#39;./oxdlibrary/Update_site_registration.php&#39;;</div><div class="line">$config = include(&#39;./oxdlibrary/oxdHttpConfig.php&#39;);</div><div class="line"></div><div class="line">if(checkOxdId())</div><div class="line">{</div><div class="line">    $oxdId = getOxdId();</div><div class="line">    try{</div><div class="line">        $update_site_registration = new Update_site_registration();</div><div class="line"></div><div class="line">        $update_site_registration-&gt;setRequestAcrValues(Oxd_RP_config::$acr_values);</div><div class="line">        $update_site_registration-&gt;setRequestOxdId($oxdId);</div><div class="line">        $update_site_registration-&gt;setRequestAuthorizationRedirectUri(Oxd_RP_config::$authorization_redirect_uri);</div><div class="line">        $update_site_registration-&gt;setRequestPostLogoutRedirectUri($_POST[&#39;postLogoutRedirectUrl&#39;]);</div><div class="line">        $update_site_registration-&gt;setRequestContacts([$_POST[&#39;oxdEmail&#39;]]);</div><div class="line">        $update_site_registration-&gt;setRequestGrantTypes(Oxd_RP_config::$grant_types);</div><div class="line">        $update_site_registration-&gt;setRequestResponseTypes(Oxd_RP_config::$response_types);</div><div class="line">        $update_site_registration-&gt;setRequestScope(Oxd_RP_config::$scope);</div><div class="line">        $update_site_registration-&gt;request($config[&quot;host&quot;].$config[$update_site_registration-&gt;getCommand()]);</div><div class="line">        echo &quot;{\&quot;status\&quot;:\&quot;ok\&quot;}&quot;;</div><div class="line">    }</div><div class="line">    catch(Exception $e){</div><div class="line">        echo &quot;{\&quot;error\&quot;:\&quot;&quot;.$e-&gt;getMessage().&quot;\&quot;}&quot;;</div><div class="line">    }</div><div class="line">}</div><div class="line">else {</div><div class="line">    echo &quot;{\&quot;error\&quot;:\&quot;Please register your site first\&quot;&quot;;</div><div class="line">}</div></div><!-- fragment --><h3>Update.php (SOCKET)</h3>
<ul>
<li><a href="https://gluu.org/docs/oxd/protocol/#update-site-registration">Update_site_registration protocol description</a>.</li>
</ul>
<p><b>Example</b></p>
<div class="fragment"><div class="line">require_once &#39;./utils.php&#39;;</div><div class="line">require_once &#39;./oxdlibrary/Update_site_registration.php&#39;;</div><div class="line">$config = include(&#39;./oxdlibrary/oxdHttpConfig.php&#39;);</div><div class="line"></div><div class="line">if(checkOxdId())</div><div class="line">{</div><div class="line">    $oxdId = getOxdId();</div><div class="line">    try{</div><div class="line">        $update_site_registration = new Update_site_registration();</div><div class="line"></div><div class="line">        $update_site_registration-&gt;setRequestAcrValues(Oxd_RP_config::$acr_values);</div><div class="line">        $update_site_registration-&gt;setRequestOxdId($oxdId);</div><div class="line">        $update_site_registration-&gt;setRequestAuthorizationRedirectUri(Oxd_RP_config::$authorization_redirect_uri);</div><div class="line">        $update_site_registration-&gt;setRequestPostLogoutRedirectUri($_POST[&#39;postLogoutRedirectUrl&#39;]);</div><div class="line">        $update_site_registration-&gt;setRequestContacts([$_POST[&#39;oxdEmail&#39;]]);</div><div class="line">        $update_site_registration-&gt;setRequestGrantTypes(Oxd_RP_config::$grant_types);</div><div class="line">        $update_site_registration-&gt;setRequestResponseTypes(Oxd_RP_config::$response_types);</div><div class="line">        $update_site_registration-&gt;setRequestScope(Oxd_RP_config::$scope);</div><div class="line">        $update_site_registration-&gt;request();</div><div class="line">        echo &quot;{\&quot;status\&quot;:\&quot;ok\&quot;}&quot;;</div><div class="line">    }</div><div class="line">    catch(Exception $e){</div><div class="line">        echo &quot;{\&quot;error\&quot;:\&quot;&quot;.$e-&gt;getMessage().&quot;\&quot;}&quot;;</div><div class="line">    }</div><div class="line">}</div><div class="line">else {</div><div class="line">    echo &quot;{\&quot;error\&quot;:\&quot;Please register your site first\&quot;&quot;;</div><div class="line">}</div></div><!-- fragment --><h3>GetAuthorizationUrl.php (OXD-TO-HTTP)</h3>
<ul>
<li><a href="https://gluu.org/docs/oxd/protocol/#get-authorization-url">Get_authorization_url protocol description</a>.</li>
</ul>
<p><b>Example</b></p>
<div class="fragment"><div class="line">require_once &#39;./utils.php&#39;;</div><div class="line">require_once &#39;./oxdlibrary/Get_authorization_url.php&#39;;</div><div class="line">$config = include(&#39;./oxdlibrary/oxdHttpConfig.php&#39;);</div><div class="line"></div><div class="line">if(checkOxdId())</div><div class="line">{</div><div class="line">    $oxdId = getOxdId();</div><div class="line">    try{</div><div class="line">        $get_authorization_url = new Get_authorization_url();</div><div class="line">        $get_authorization_url-&gt;setRequestOxdId($oxdId);</div><div class="line">        $get_authorization_url-&gt;setRequestScope(Oxd_RP_config::$scope);</div><div class="line">        $get_authorization_url-&gt;setRequestAcrValues(Oxd_RP_config::$acr_values);</div><div class="line">        $get_authorization_url-&gt;request($config[&quot;host&quot;].$config[$get_authorization_url-&gt;getCommand()]);</div><div class="line">        echo &quot;{\&quot;authorizationUrl\&quot;:\&quot;&quot;.$get_authorization_url-&gt;getResponseAuthorizationUrl().&quot;\&quot;}&quot;;</div><div class="line">    }</div><div class="line">    catch(Exception $e){</div><div class="line">        echo $e-&gt;getMessage();</div><div class="line">    }</div><div class="line">}</div><div class="line">else {</div><div class="line">    echo &quot;Please register your site first&quot;;</div><div class="line">}</div></div><!-- fragment --><h3>GetAuthorizationUrl.php (SOCKET)</h3>
<ul>
<li><a href="https://gluu.org/docs/oxd/protocol/#get-authorization-url">Get_authorization_url protocol description</a>.</li>
</ul>
<p><b>Example</b></p>
<div class="fragment"><div class="line">require_once &#39;./utils.php&#39;;</div><div class="line">require_once &#39;./oxdlibrary/Get_authorization_url.php&#39;;</div><div class="line">$config = include(&#39;./oxdlibrary/oxdHttpConfig.php&#39;);</div><div class="line"></div><div class="line">if(checkOxdId())</div><div class="line">{</div><div class="line">    $oxdId = getOxdId();</div><div class="line">    try{</div><div class="line">        $get_authorization_url = new Get_authorization_url();</div><div class="line">        $get_authorization_url-&gt;setRequestOxdId($oxdId);</div><div class="line">        $get_authorization_url-&gt;setRequestScope(Oxd_RP_config::$scope);</div><div class="line">        $get_authorization_url-&gt;setRequestAcrValues(Oxd_RP_config::$acr_values);</div><div class="line">        $get_authorization_url-&gt;request();</div><div class="line">        echo &quot;{\&quot;authorizationUrl\&quot;:\&quot;&quot;.$get_authorization_url-&gt;getResponseAuthorizationUrl().&quot;\&quot;}&quot;;</div><div class="line">    }</div><div class="line">    catch(Exception $e){</div><div class="line">        echo $e-&gt;getMessage();</div><div class="line">    }</div><div class="line">}</div><div class="line">else {</div><div class="line">    echo &quot;Please register your site first&quot;;</div><div class="line">}</div></div><!-- fragment --><h3>GetTokens.php (OXD-TO-HTTP)</h3>
<ul>
<li><a href="https://gluu.org/docs/oxd/protocol/#get-tokens-id-access-by-code">Get_tokens_by_code protocol description</a>.</li>
</ul>
<p><b>Example</b></p>
<div class="fragment"><div class="line">require_once &#39;./utils.php&#39;;</div><div class="line">require_once &#39;./oxdlibrary/Get_tokens_by_code.php&#39;;</div><div class="line">$config = include(&#39;./oxdlibrary/oxdHttpConfig.php&#39;);</div><div class="line"></div><div class="line">if(checkOxdId())</div><div class="line">{</div><div class="line">    $oxdId = getOxdId();</div><div class="line">    try{</div><div class="line">        $get_tokens_by_code = new Get_tokens_by_code();</div><div class="line">        $get_tokens_by_code-&gt;setRequestOxdId($oxdId);</div><div class="line">        $get_tokens_by_code-&gt;setRequestCode($_REQUEST[&#39;authCode&#39;]);</div><div class="line">        $get_tokens_by_code-&gt;setRequestState($_REQUEST[&#39;authState&#39;]);</div><div class="line">        $get_tokens_by_code-&gt;request($config[&quot;host&quot;].$config[$get_tokens_by_code-&gt;getCommand()]);</div><div class="line">        $data[&#39;accessToken&#39;] = $get_tokens_by_code-&gt;getResponseAccessToken();</div><div class="line">        $data[&#39;refreshToken&#39;] = $get_tokens_by_code-&gt;getResponseRefreshToken();</div><div class="line">        $data[&#39;idToken&#39;] = $get_tokens_by_code-&gt;getResponseIdToken();</div><div class="line">        $data[&#39;idTokenClaims&#39;] = $get_tokens_by_code-&gt;getResponseIdTokenClaims();</div><div class="line">        echo json_encode($data);</div><div class="line">    }</div><div class="line">    catch(Exception $e){</div><div class="line">        echo $e-&gt;getMessage();</div><div class="line">    }</div><div class="line">}</div><div class="line">else {</div><div class="line">    echo &quot;Please register your site first&quot;;</div><div class="line">}</div></div><!-- fragment --><h3>GetTokens.php (SOCKET)</h3>
<ul>
<li><a href="https://gluu.org/docs/oxd/protocol/#get-tokens-id-access-by-code">Get_tokens_by_code protocol description</a>.</li>
</ul>
<p><b>Example</b></p>
<div class="fragment"><div class="line">require_once &#39;./utils.php&#39;;</div><div class="line">require_once &#39;./oxdlibrary/Get_tokens_by_code.php&#39;;</div><div class="line">$config = include(&#39;./oxdlibrary/oxdHttpConfig.php&#39;);</div><div class="line"></div><div class="line">if(checkOxdId())</div><div class="line">{</div><div class="line">    $oxdId = getOxdId();</div><div class="line">    try{</div><div class="line">        $get_tokens_by_code = new Get_tokens_by_code();</div><div class="line">        $get_tokens_by_code-&gt;setRequestOxdId($oxdId);</div><div class="line">        $get_tokens_by_code-&gt;setRequestCode($_REQUEST[&#39;authCode&#39;]);</div><div class="line">        $get_tokens_by_code-&gt;setRequestState($_REQUEST[&#39;authState&#39;]);</div><div class="line">        $get_tokens_by_code-&gt;request($config[&quot;host&quot;].$config[$get_tokens_by_code-&gt;getCommand()]);</div><div class="line">        $data[&#39;accessToken&#39;] = $get_tokens_by_code-&gt;getResponseAccessToken();</div><div class="line">        $data[&#39;refreshToken&#39;] = $get_tokens_by_code-&gt;getResponseRefreshToken();</div><div class="line">        $data[&#39;idToken&#39;] = $get_tokens_by_code-&gt;getResponseIdToken();</div><div class="line">        $data[&#39;idTokenClaims&#39;] = $get_tokens_by_code-&gt;getResponseIdTokenClaims();</div><div class="line">        echo json_encode($data);</div><div class="line">    }</div><div class="line">    catch(Exception $e){</div><div class="line">        echo $e-&gt;getMessage();</div><div class="line">    }</div><div class="line">}</div><div class="line">else {</div><div class="line">    echo &quot;Please register your site first&quot;;</div><div class="line">}</div></div><!-- fragment --><h3>GetUserInfo.php (OXD-TO-HTTP)</h3>
<ul>
<li><a href="https://gluu.org/docs/oxd/protocol/#get-user-info">Get_user_info protocol description</a>.</li>
</ul>
<p><b>Example</b></p>
<div class="fragment"><div class="line">require_once &#39;./utils.php&#39;;</div><div class="line">require_once &#39;./oxdlibrary/Get_user_info.php&#39;;</div><div class="line">$config = include(&#39;./oxdlibrary/oxdHttpConfig.php&#39;);</div><div class="line"></div><div class="line">if(checkOxdId())</div><div class="line">{</div><div class="line">    $oxdId = getOxdId();</div><div class="line">    try{</div><div class="line">        $get_user_info = new Get_user_info();</div><div class="line">        $get_user_info-&gt;setRequestOxdId($oxdId);</div><div class="line">        $get_user_info-&gt;setRequestAccessToken($_REQUEST[&#39;accessToken&#39;]);</div><div class="line">        $get_user_info-&gt;request($config[&quot;host&quot;].$config[$get_user_info-&gt;getCommand()]);</div><div class="line">        $data = $get_user_info-&gt;getResponseClaims();</div><div class="line">        $response[&#39;userEmail&#39;] = $data-&gt;email[0];</div><div class="line">        $response[&#39;userName&#39;] = $data-&gt;name[0];</div><div class="line">        echo json_encode($response);</div><div class="line">    }</div><div class="line">    catch(Exception $e){</div><div class="line">        echo $e-&gt;getMessage();</div><div class="line">    }</div><div class="line">}</div><div class="line">else {</div><div class="line">    echo &quot;Please register your site first&quot;;</div><div class="line">}</div></div><!-- fragment --><h3>GetUserInfo.php (SOCKET)</h3>
<ul>
<li><a href="https://gluu.org/docs/oxd/protocol/#get-user-info">Get_user_info protocol description</a>.</li>
</ul>
<p><b>Example</b></p>
<div class="fragment"><div class="line">require_once &#39;./utils.php&#39;;</div><div class="line">require_once &#39;./oxdlibrary/Get_user_info.php&#39;;</div><div class="line">$config = include(&#39;./oxdlibrary/oxdHttpConfig.php&#39;);</div><div class="line"></div><div class="line">if(checkOxdId())</div><div class="line">{</div><div class="line">    $oxdId = getOxdId();</div><div class="line">    try{</div><div class="line">        $get_user_info = new Get_user_info();</div><div class="line">        $get_user_info-&gt;setRequestOxdId($oxdId);</div><div class="line">        $get_user_info-&gt;setRequestAccessToken($_REQUEST[&#39;accessToken&#39;]);</div><div class="line">        $get_user_info-&gt;request();</div><div class="line">        $data = $get_user_info-&gt;getResponseClaims();</div><div class="line">        $response[&#39;userEmail&#39;] = $data-&gt;email[0];</div><div class="line">        $response[&#39;userName&#39;] = $data-&gt;name[0];</div><div class="line">        echo json_encode($response);</div><div class="line">    }</div><div class="line">    catch(Exception $e){</div><div class="line">        echo $e-&gt;getMessage();</div><div class="line">    }</div><div class="line">}</div><div class="line">else {</div><div class="line">    echo &quot;Please register your site first&quot;;</div><div class="line">}</div></div><!-- fragment --><h3>GetLogoutUri.php (OXD-TO-HTTP)</h3>
<ul>
<li><a href="https://gluu.org/docs/oxd/protocol/#log-out-uri">Get_logout_uri protocol description</a>.</li>
</ul>
<p><b>Example</b></p>
<div class="fragment"><div class="line">require_once &#39;./utils.php&#39;;</div><div class="line">require_once &#39;./oxdlibrary/Logout.php&#39;;</div><div class="line">$config = include(&#39;./oxdlibrary/oxdHttpConfig.php&#39;);</div><div class="line"></div><div class="line">if(checkOxdId())</div><div class="line">{</div><div class="line">    $oxdId = getOxdId();</div><div class="line">    try{</div><div class="line">        $get_logout_uri = new Logout();</div><div class="line">        $get_logout_uri-&gt;setRequestOxdId($oxdId);</div><div class="line">        $get_logout_uri-&gt;request($config[&quot;host&quot;].$config[$get_logout_uri-&gt;getCommand()]);</div><div class="line">        $data[&quot;logoutUri&quot;] = $get_logout_uri-&gt;getResponseObject()-&gt;data-&gt;uri;</div><div class="line">        echo json_encode($data);</div><div class="line">    }</div><div class="line">    catch(Exception $e){</div><div class="line">        echo $e-&gt;getMessage();</div><div class="line">    }</div><div class="line">}</div><div class="line">else {</div><div class="line">    echo &quot;Please register your site first&quot;;</div><div class="line">}</div></div><!-- fragment --><h3>GetLogoutUri.php (SOCKET)</h3>
<ul>
<li><a href="https://gluu.org/docs/oxd/protocol/#log-out-uri">Get_logout_uri protocol description</a>.</li>
</ul>
<p><b>Example</b></p>
<div class="fragment"><div class="line">require_once &#39;./utils.php&#39;;</div><div class="line">require_once &#39;./oxdlibrary/Logout.php&#39;;</div><div class="line">$config = include(&#39;./oxdlibrary/oxdHttpConfig.php&#39;);</div><div class="line"></div><div class="line">if(checkOxdId())</div><div class="line">{</div><div class="line">    $oxdId = getOxdId();</div><div class="line">    try{</div><div class="line">        $get_logout_uri = new Logout();</div><div class="line">        $get_logout_uri-&gt;setRequestOxdId($oxdId);</div><div class="line">        $get_logout_uri-&gt;request();</div><div class="line">        $data[&quot;logoutUri&quot;] = $get_logout_uri-&gt;getResponseObject()-&gt;data-&gt;uri;</div><div class="line">        echo json_encode($data);</div><div class="line">    }</div><div class="line">    catch(Exception $e){</div><div class="line">        echo $e-&gt;getMessage();</div><div class="line">    }</div><div class="line">}</div><div class="line">else {</div><div class="line">    echo &quot;Please register your site first&quot;;</div><div class="line">}</div></div><!-- fragment --> </div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
